'use strict';

var React = require('react-native');
var {
  AppRegistry,
  StyleSheet,
  Text,
  View,
  TouchableHighlight
} = React;

var ViewPager = require('react-native-viewpager');
var counter=0
//var dateArray=[1,2,3,4,5]
var dateArray=[1,2];
var ds = new ViewPager.DataSource({
pageHasChanged: (p1, p2) => p1 !== p2,
});
var test17 = React.createClass({
  getInitialState(){

    return{
      dataSource:ds.cloneWithPages(dateArray),
      page:0
    }
  },
  _renderPage(rowData){
    return(
      <Text style = {{color:'black',width:360,height:80}}>
        {rowData}
      </Text>
    )
  },
  render: function() {
    return (
      <View style={styles.container}>
        <ViewPager
          ref={(viewPager)=>{this.viewPager = viewPager}}
          style={{width:360,height:150}}
          dataSource={this.state.dataSource}
          renderPage={this._renderPage}
          isLoop={true}
          onChangePage={(page)=>{
            console.log(page);
          }}
        />
        <TouchableHighlight
          style={{padding: 20}}
          onPress = {()=>{
            dateArray.splice(0,1)
            console.log(dateArray);
            this.setState({
              dataSource:ds.cloneWithPages(dateArray)
              //page:counter++
            })
            //this.viewPager.goToPage(this.state.page)
          }}>
            <Text>Increase</Text>
          </TouchableHighlight>
      </View>
    );
  }
});

var styles = StyleSheet.create({
  container: {
    justifyContent: 'center',
    // alignItems: 'center',
    backgroundColor: '#F5FCFF',
    height:150
  },
  welcome: {
    fontSize: 20,
    textAlign: 'center',
    margin: 10,
  },
  instructions: {
    textAlign: 'center',
    color: '#333333',
    marginBottom: 5,
  },
});

AppRegistry.registerComponent('RNViewPager', () => test17);
